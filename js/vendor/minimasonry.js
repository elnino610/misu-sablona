var MiniMasonry=function(conf){return this._sizes=[],this._columns=[],this._container=null,this._count=null,this._width=0,this._removeListener=null,this._currentGutterX=null,this._currentGutterY=null,this._resizeTimeout=null,this.conf={baseWidth:255,gutterX:null,gutterY:null,gutter:10,container:null,minify:!0,ultimateGutter:5,surroundingGutter:!0,direction:"ltr",wedge:!1},this.init(conf),this};MiniMasonry.prototype.init=function(conf){for(var i in this.conf)null!=conf[i]&&(this.conf[i]=conf[i]);if(null!=this.conf.gutterX&&null!=this.conf.gutterY||(this.conf.gutterX=this.conf.gutterY=this.conf.gutter),this._currentGutterX=this.conf.gutterX,this._currentGutterY=this.conf.gutterY,this._container="object"==typeof this.conf.container&&this.conf.container.nodeName?this.conf.container:document.querySelector(this.conf.container),!this._container)throw new Error("Container not found or missing");var onResize=this.resizeThrottler.bind(this);window.addEventListener("resize",onResize),this._removeListener=function(){window.removeEventListener("resize",onResize)},this.layout()},MiniMasonry.prototype.reset=function(){this._sizes=[],this._columns=[],this._count=null,this._width=this._container.clientWidth;var minWidth=this.conf.baseWidth;this._width<minWidth&&(this._width=minWidth,this._container.style.minWidth=minWidth+"px"),1==this.getCount()?(this._currentGutterX=this.conf.ultimateGutter,this._count=1):this._width<this.conf.baseWidth+2*this._currentGutterX?this._currentGutterX=0:this._currentGutterX=this.conf.gutterX},MiniMasonry.prototype.getCount=function(){return this.conf.surroundingGutter?Math.floor((this._width-this._currentGutterX)/(this.conf.baseWidth+this._currentGutterX)):Math.floor((this._width+this._currentGutterX)/(this.conf.baseWidth+this._currentGutterX))},MiniMasonry.prototype.computeWidth=function(){var width;return width=this.conf.surroundingGutter?(this._width-this._currentGutterX)/this._count-this._currentGutterX:(this._width+this._currentGutterX)/this._count-this._currentGutterX,width=Number.parseFloat(width.toFixed(2))},MiniMasonry.prototype.layout=function(){if(this._container){this.reset(),null==this._count&&(this._count=this.getCount());for(var colWidth=this.computeWidth(),i=0;i<this._count;i++)this._columns[i]=0;for(var startX,children=this._container.children,k=0;k<children.length;k++)children[k].style.width=colWidth+"px",this._sizes[k]=children[k].clientHeight;if(startX="ltr"==this.conf.direction?this.conf.surroundingGutter?this._currentGutterX:0:this._width-(this.conf.surroundingGutter?this._currentGutterX:0),this._count>this._sizes.length){var occupiedSpace=this._sizes.length*(colWidth+this._currentGutterX)-this._currentGutterX;!1===this.conf.wedge?startX="ltr"==this.conf.direction?(this._width-occupiedSpace)/2:this._width-(this._width-occupiedSpace)/2:"ltr"==this.conf.direction||(startX=this._width-this._currentGutterX)}for(var index=0;index<children.length;index++){var x,nextColumn=this.conf.minify?this.getShortest():this.getNextColumn(index),childrenGutter=0;(this.conf.surroundingGutter||nextColumn!=this._columns.length)&&(childrenGutter=this._currentGutterX),x="ltr"==this.conf.direction?startX+(colWidth+childrenGutter)*nextColumn:startX-(colWidth+childrenGutter)*nextColumn-colWidth;var y=this._columns[nextColumn];children[index].style.transform="translate3d("+Math.round(x)+"px,"+Math.round(y)+"px,0)",this._columns[nextColumn]+=this._sizes[index]+(this._count>1?this.conf.gutterY:this.conf.ultimateGutter)}this._container.style.height=this._columns[this.getLongest()]-this._currentGutterY+"px"}else console.error("Container not found")},MiniMasonry.prototype.getNextColumn=function(index){return index%this._columns.length},MiniMasonry.prototype.getShortest=function(){for(var shortest=0,i=0;i<this._count;i++)this._columns[i]<this._columns[shortest]&&(shortest=i);return shortest},MiniMasonry.prototype.getLongest=function(){for(var longest=0,i=0;i<this._count;i++)this._columns[i]>this._columns[longest]&&(longest=i);return longest},MiniMasonry.prototype.resizeThrottler=function(){this._resizeTimeout||(this._resizeTimeout=setTimeout(function(){this._resizeTimeout=null,this._container.clientWidth!=this._width&&this.layout()}.bind(this),33))},MiniMasonry.prototype.destroy=function(){"function"==typeof this._removeListener&&this._removeListener();for(var children=this._container.children,k=0;k<children.length;k++)children[k].style.removeProperty("width"),children[k].style.removeProperty("transform");this._container.style.removeProperty("height"),this._container.style.removeProperty("min-width")};export default MiniMasonry;